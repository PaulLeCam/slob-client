(function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define(["core/util","core/dom","core/mvc","core/template","core/routing","core/store"],function(e,n,r,i,s,o){var u,a,f,l,c,h,p,d;return c=new o,i.registerHelper("safe",function(e){return new i.SafeString(e)}),i.addSubView=function(e){return c.set(e.cid,e),new i.SafeString('<view data-cid="'+e.cid+'"></view>')},i.renderSubView=function(e){var t;return(t=c.get(e))?(c["delete"](e),t.render().el):""},i.renderSubViews=function(e){return e.find("view").each(function(t,r){var s;return s=n.find(r,e),s.replaceWith(i.renderSubView(s.data("cid")))})},i.registerHelper("subView",i.addSubView),a=function(e){function n(e){var t,r,i,s;e==null&&(e={}),(t=e.id||e.cid)&&(i=this.store.get(t))?i.set(e,{silent:!0}):(i=n.__super__.constructor.call(this,e),r=(s=this.id)!=null?s:this.cid,this.store.set(r,i)),i}return t(n,e),n.prototype.store=new o,n.prototype.emit=function(){return this.trigger.apply(this,arguments)},n}(r.Model),u=function(e){function n(){return h=n.__super__.constructor.apply(this,arguments),h}return t(n,e),n.prototype.emit=function(){return this.trigger.apply(this,arguments)},n}(r.Collection),f=function(e){function s(){return p=s.__super__.constructor.apply(this,arguments),p}return t(s,e),s.prototype.initialize=function(e){var t;e==null&&(e={}),e.model&&!(e.model instanceof r.Model)&&(this.Model?this.model=new this.Model(e.model):console.error("Invalid model",e.model)),e.collection&&!(e.collection instanceof r.Collection)&&(this.Collection?this.collection=new this.Collection(e.collection):console.error("Invalid collection",e.collection));if(!e.el&&e.cid){t=n.find("[data-view="+e.cid+"]");if(t.length)return this.setElement(t)}},s.prototype.emit=function(){return this.trigger.apply(this,arguments)},s.prototype.renderer=function(e){return this.$el.attr("data-view",this.cid).html(e),i.renderSubViews(this.$el),this},s}(r.View),l=function(e){function n(){return d=n.__super__.constructor.apply(this,arguments),d}return t(n,e),n.prototype.start=function(){return this.rendered?this.delegateEvents():(this.render(),this.rendered=!0)},n.prototype.stop=function(){return this.undelegateEvents()},n}(f),r={Model:a,View:f,Collection:u},{mvc:r,template:i,routing:s,Widget:l}})}).call(this);